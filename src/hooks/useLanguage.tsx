import { createContext, useContext, useState, useEffect, ReactNode } from 'react';

type Language = 'es' | 'en' | 'ca' | 'fr' | 'de' | 'nl';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
  getLanguageName: (lang: Language) => string;
}

const translations: Record<Language, Record<string, string>> = {
  es: {
    'welcome.title': 'Casa Vista Hermosa',
    'welcome.subtitle': 'Â¡Bienvenido! Tu estancia comienza aquÃ­ âœ¨',
    'welcome.guestsRegistered': 'HuÃ©spedes registrados',
    'welcome.completeRegistration': 'Completar mi registro',
    'welcome.step': 'Paso 1 de 3',
    'welcome.share': 'Compartir enlace',
    'welcome.viewAccommodation': 'Ver alojamiento',
    'welcome.dataProtected': 'ğŸ”’ Tus datos estÃ¡n protegidos y encriptados',
    'welcome.compliance': 'Cumplimos con el RGPD y normativa espaÃ±ola de hospedaje',
    'welcome.timeEstimate': 'ğŸ“‹ Completa tu registro en solo 3 minutos',
    'welcome.contact': 'Contactar',
    'dashboard.myStay': 'Mi Estancia',
    'dashboard.myReservation': 'Mi Reserva',
    'dashboard.openAccommodation': 'ğŸ”“ Abrir Alojamiento',
    'dashboard.preferences': 'Preferencias de Estancia',
    'dashboard.yourHost': 'Tu AnfitriÃ³n',
    'dashboard.accommodationInfo': 'InformaciÃ³n del Alojamiento',
    'dashboard.welcomeVideo': 'Video de Bienvenida',
    'dashboard.localGuide': 'GuÃ­a Local',
    'dashboard.customerSupport': 'AtenciÃ³n al Cliente',
    'dashboard.completeToUnlock': 'Completa tu registro para desbloquear',
    'dashboard.sendMessage': 'ğŸ’¬ Enviar mensaje',
    'dashboard.callNow': 'ğŸ“ Llamar ahora',
    'dashboard.sendEmail': 'ğŸ“§ Enviar email',
    'dashboard.missingGuests': 'Faltan huÃ©spedes por registrar',
    'dashboard.someFeaturesLimited': 'Algunas funciones estÃ¡n limitadas hasta que todos los huÃ©spedes se registren',
    'dashboard.reportIncident': 'Reportar incidencia',
    'dashboard.reportIncidentTitle': 'Reportar una Incidencia',
    'dashboard.incidentDescription': 'Describe el problema',
    'dashboard.incidentSubmit': 'Enviar reporte',
    'dashboard.incidentCancel': 'Cancelar',
    'dashboard.openDoor': 'Abrir Puerta Principal',
    'dashboard.openGarage': 'Abrir Garaje',
    'dashboard.unlockHistory': 'Historial de Aperturas',
    'dashboard.unlockSuccess': 'Puerta abierta exitosamente',
    'dashboard.unlockFailed': 'Error al abrir la puerta',
    'localGuide.restaurants': 'ğŸ½ï¸ Restaurantes',
    'localGuide.cafes': 'â˜• CafeterÃ­as',
    'localGuide.supermarkets': 'ğŸ›’ Supermercados',
    'localGuide.transport': 'ğŸš‡ Transporte pÃºblico',
    'localGuide.tourist': 'ğŸ›ï¸ Lugares turÃ­sticos',
    'localGuide.emergency': 'ğŸ¥ Servicios de emergencia',
    'localGuide.entertainment': 'ğŸ­ Ocio y entretenimiento',
    'contact.title': 'Contactar AnfitriÃ³n',
    'contact.name': 'MarÃ­a GarcÃ­a',
    'contact.phone': '+34 612 345 678',
    'contact.email': 'maria@casavistahermosa.com',
    'contact.available': 'Disponible 24/7 para emergencias',
    'share.title': 'Compartir Enlace de Registro',
    'share.message': 'Completa tu registro para Casa Vista Hermosa',
    'share.copy': 'Copiar enlace',
    'share.whatsapp': 'Compartir por WhatsApp',
    'share.email': 'Compartir por Email',
    'share.copied': 'Â¡Enlace copiado!',
  },
  en: {
    'welcome.title': 'Casa Vista Hermosa',
    'welcome.subtitle': 'Welcome! Your stay begins here âœ¨',
    'welcome.guestsRegistered': 'Registered guests',
    'welcome.completeRegistration': 'Complete my registration',
    'welcome.step': 'Step 1 of 3',
    'welcome.share': 'Share link',
    'welcome.viewAccommodation': 'View accommodation',
    'welcome.dataProtected': 'ğŸ”’ Your data is protected and encrypted',
    'welcome.compliance': 'We comply with GDPR and Spanish hosting regulations',
    'welcome.timeEstimate': 'ğŸ“‹ Complete your registration in just 3 minutes',
    'welcome.contact': 'Contact',
    'dashboard.myStay': 'My Stay',
    'dashboard.myReservation': 'My Reservation',
    'dashboard.openAccommodation': 'ğŸ”“ Open Accommodation',
    'dashboard.preferences': 'Stay Preferences',
    'dashboard.yourHost': 'Your Host',
    'dashboard.accommodationInfo': 'Accommodation Information',
    'dashboard.welcomeVideo': 'Welcome Video',
    'dashboard.localGuide': 'Local Guide',
    'dashboard.customerSupport': 'Customer Support',
    'dashboard.completeToUnlock': 'Complete your registration to unlock',
    'dashboard.sendMessage': 'ğŸ’¬ Send message',
    'dashboard.callNow': 'ğŸ“ Call now',
    'dashboard.sendEmail': 'ğŸ“§ Send email',
    'dashboard.missingGuests': 'Missing guests to register',
    'dashboard.someFeaturesLimited': 'Some features are limited until all guests register',
    'dashboard.reportIncident': 'Report incident',
    'dashboard.reportIncidentTitle': 'Report an Incident',
    'dashboard.incidentDescription': 'Describe the problem',
    'dashboard.incidentSubmit': 'Submit report',
    'dashboard.incidentCancel': 'Cancel',
    'dashboard.openDoor': 'Open Main Door',
    'dashboard.openGarage': 'Open Garage',
    'dashboard.unlockHistory': 'Unlock History',
    'dashboard.unlockSuccess': 'Door opened successfully',
    'dashboard.unlockFailed': 'Failed to open door',
    'localGuide.restaurants': 'ğŸ½ï¸ Restaurants',
    'localGuide.cafes': 'â˜• Cafes',
    'localGuide.supermarkets': 'ğŸ›’ Supermarkets',
    'localGuide.transport': 'ğŸš‡ Public Transport',
    'localGuide.tourist': 'ğŸ›ï¸ Tourist Attractions',
    'localGuide.emergency': 'ğŸ¥ Emergency Services',
    'localGuide.entertainment': 'ğŸ­ Entertainment',
    'contact.title': 'Contact Host',
    'contact.name': 'MarÃ­a GarcÃ­a',
    'contact.phone': '+34 612 345 678',
    'contact.email': 'maria@casavistahermosa.com',
    'contact.available': 'Available 24/7 for emergencies',
    'share.title': 'Share Registration Link',
    'share.message': 'Complete your registration for Casa Vista Hermosa',
    'share.copy': 'Copy link',
    'share.whatsapp': 'Share via WhatsApp',
    'share.email': 'Share via Email',
    'share.copied': 'Link copied!',
  },
  ca: {
    'welcome.title': 'Casa Vista Hermosa',
    'welcome.subtitle': 'Benvingut! La teva estada comenÃ§a aquÃ­ âœ¨',
    'welcome.guestsRegistered': 'Hostes registrats',
    'welcome.completeRegistration': 'Completar el meu registre',
    'welcome.step': 'Pas 1 de 3',
    'welcome.share': 'Compartir enllaÃ§',
    'welcome.viewAccommodation': 'Veure allotjament',
    'welcome.dataProtected': 'ğŸ”’ Les teves dades estan protegides i encriptades',
    'welcome.compliance': 'Complim amb el RGPD i normativa espanyola d\'allotjament',
    'welcome.timeEstimate': 'ğŸ“‹ Completa el teu registre en nomÃ©s 3 minuts',
    'welcome.contact': 'Contactar',
    'dashboard.myStay': 'La Meva Estada',
    'dashboard.myReservation': 'La Meva Reserva',
    'dashboard.openAccommodation': 'ğŸ”“ Obrir Allotjament',
    'dashboard.preferences': 'PreferÃ¨ncies d\'Estada',
    'dashboard.yourHost': 'El Teu AmfitriÃ³',
    'dashboard.accommodationInfo': 'InformaciÃ³ de l\'Allotjament',
    'dashboard.welcomeVideo': 'VÃ­deo de Benvinguda',
    'dashboard.localGuide': 'Guia Local',
    'dashboard.customerSupport': 'AtenciÃ³ al Client',
    'dashboard.completeToUnlock': 'Completa el teu registre per desbloquejar',
    'dashboard.sendMessage': 'ğŸ’¬ Enviar missatge',
    'dashboard.callNow': 'ğŸ“ Trucar ara',
    'dashboard.sendEmail': 'ğŸ“§ Enviar email',
    'localGuide.restaurants': 'ğŸ½ï¸ Restaurants',
    'localGuide.cafes': 'â˜• Cafeteries',
    'localGuide.supermarkets': 'ğŸ›’ Supermercats',
    'localGuide.transport': 'ğŸš‡ Transport pÃºblic',
    'localGuide.tourist': 'ğŸ›ï¸ Llocs turÃ­stics',
    'localGuide.emergency': 'ğŸ¥ Serveis d\'emergÃ¨ncia',
    'localGuide.entertainment': 'ğŸ­ Oci i entreteniment',
    'contact.title': 'Contactar AmfitriÃ³',
    'contact.name': 'MarÃ­a GarcÃ­a',
    'contact.phone': '+34 612 345 678',
    'contact.email': 'maria@casavistahermosa.com',
    'contact.available': 'Disponible 24/7 per emergÃ¨ncies',
    'share.title': 'Compartir EnllaÃ§ de Registre',
    'share.message': 'Completa el teu registre per Casa Vista Hermosa',
    'share.copy': 'Copiar enllaÃ§',
    'share.whatsapp': 'Compartir per WhatsApp',
    'share.email': 'Compartir per Email',
    'share.copied': 'EnllaÃ§ copiat!',
  },
  fr: {
    'welcome.title': 'Casa Vista Hermosa',
    'welcome.subtitle': 'Bienvenue! Votre sÃ©jour commence ici âœ¨',
    'welcome.guestsRegistered': 'InvitÃ©s enregistrÃ©s',
    'welcome.completeRegistration': 'ComplÃ©ter mon inscription',
    'welcome.step': 'Ã‰tape 1 sur 3',
    'welcome.share': 'Partager le lien',
    'welcome.viewAccommodation': 'Voir l\'hÃ©bergement',
    'welcome.dataProtected': 'ğŸ”’ Vos donnÃ©es sont protÃ©gÃ©es et cryptÃ©es',
    'welcome.compliance': 'Nous respectons le RGPD et la rÃ©glementation espagnole',
    'welcome.timeEstimate': 'ğŸ“‹ ComplÃ©tez votre inscription en seulement 3 minutes',
    'welcome.contact': 'Contacter',
    'dashboard.myStay': 'Mon SÃ©jour',
    'dashboard.myReservation': 'Ma RÃ©servation',
    'dashboard.openAccommodation': 'ğŸ”“ Ouvrir l\'HÃ©bergement',
    'dashboard.preferences': 'PrÃ©fÃ©rences de SÃ©jour',
    'dashboard.yourHost': 'Votre HÃ´te',
    'dashboard.accommodationInfo': 'Informations sur l\'HÃ©bergement',
    'dashboard.welcomeVideo': 'VidÃ©o de Bienvenue',
    'dashboard.localGuide': 'Guide Local',
    'dashboard.customerSupport': 'Service Client',
    'dashboard.completeToUnlock': 'ComplÃ©tez votre inscription pour dÃ©verrouiller',
    'dashboard.sendMessage': 'ğŸ’¬ Envoyer un message',
    'dashboard.callNow': 'ğŸ“ Appeler maintenant',
    'dashboard.sendEmail': 'ğŸ“§ Envoyer un email',
    'localGuide.restaurants': 'ğŸ½ï¸ Restaurants',
    'localGuide.cafes': 'â˜• CafÃ©s',
    'localGuide.supermarkets': 'ğŸ›’ SupermarchÃ©s',
    'localGuide.transport': 'ğŸš‡ Transport public',
    'localGuide.tourist': 'ğŸ›ï¸ Attractions touristiques',
    'localGuide.emergency': 'ğŸ¥ Services d\'urgence',
    'localGuide.entertainment': 'ğŸ­ Divertissement',
    'contact.title': 'Contacter l\'HÃ´te',
    'contact.name': 'MarÃ­a GarcÃ­a',
    'contact.phone': '+34 612 345 678',
    'contact.email': 'maria@casavistahermosa.com',
    'contact.available': 'Disponible 24h/24 pour les urgences',
    'share.title': 'Partager le Lien d\'Inscription',
    'share.message': 'ComplÃ©tez votre inscription pour Casa Vista Hermosa',
    'share.copy': 'Copier le lien',
    'share.whatsapp': 'Partager via WhatsApp',
    'share.email': 'Partager par Email',
    'share.copied': 'Lien copiÃ©!',
  },
  de: {
    'welcome.title': 'Casa Vista Hermosa',
    'welcome.subtitle': 'Willkommen! Ihr Aufenthalt beginnt hier âœ¨',
    'welcome.guestsRegistered': 'Registrierte GÃ¤ste',
    'welcome.completeRegistration': 'Meine Registrierung abschlieÃŸen',
    'welcome.step': 'Schritt 1 von 3',
    'welcome.share': 'Link teilen',
    'welcome.viewAccommodation': 'Unterkunft ansehen',
    'welcome.dataProtected': 'ğŸ”’ Ihre Daten sind geschÃ¼tzt und verschlÃ¼sselt',
    'welcome.compliance': 'Wir erfÃ¼llen die DSGVO und spanische Vorschriften',
    'welcome.timeEstimate': 'ğŸ“‹ SchlieÃŸen Sie Ihre Registrierung in nur 3 Minuten ab',
    'welcome.contact': 'Kontakt',
    'dashboard.myStay': 'Mein Aufenthalt',
    'dashboard.myReservation': 'Meine Reservierung',
    'dashboard.openAccommodation': 'ğŸ”“ Unterkunft Ã¶ffnen',
    'dashboard.preferences': 'AufenthaltsprÃ¤ferenzen',
    'dashboard.yourHost': 'Ihr Gastgeber',
    'dashboard.accommodationInfo': 'Unterkunftsinformationen',
    'dashboard.welcomeVideo': 'Willkommensvideo',
    'dashboard.localGuide': 'Lokaler FÃ¼hrer',
    'dashboard.customerSupport': 'Kundenservice',
    'dashboard.completeToUnlock': 'SchlieÃŸen Sie Ihre Registrierung ab zum Entsperren',
    'dashboard.sendMessage': 'ğŸ’¬ Nachricht senden',
    'dashboard.callNow': 'ğŸ“ Jetzt anrufen',
    'dashboard.sendEmail': 'ğŸ“§ E-Mail senden',
    'localGuide.restaurants': 'ğŸ½ï¸ Restaurants',
    'localGuide.cafes': 'â˜• CafÃ©s',
    'localGuide.supermarkets': 'ğŸ›’ SupermÃ¤rkte',
    'localGuide.transport': 'ğŸš‡ Ã–ffentliche Verkehrsmittel',
    'localGuide.tourist': 'ğŸ›ï¸ Touristische Attraktionen',
    'localGuide.emergency': 'ğŸ¥ Notdienste',
    'localGuide.entertainment': 'ğŸ­ Unterhaltung',
    'contact.title': 'Gastgeber kontaktieren',
    'contact.name': 'MarÃ­a GarcÃ­a',
    'contact.phone': '+34 612 345 678',
    'contact.email': 'maria@casavistahermosa.com',
    'contact.available': 'VerfÃ¼gbar 24/7 fÃ¼r NotfÃ¤lle',
    'share.title': 'Registrierungslink teilen',
    'share.message': 'SchlieÃŸen Sie Ihre Registrierung fÃ¼r Casa Vista Hermosa ab',
    'share.copy': 'Link kopieren',
    'share.whatsapp': 'Ãœber WhatsApp teilen',
    'share.email': 'Per E-Mail teilen',
    'share.copied': 'Link kopiert!',
  },
  nl: {
    'welcome.title': 'Casa Vista Hermosa',
    'welcome.subtitle': 'Welkom! Uw verblijf begint hier âœ¨',
    'welcome.guestsRegistered': 'Geregistreerde gasten',
    'welcome.completeRegistration': 'Mijn registratie voltooien',
    'welcome.step': 'Stap 1 van 3',
    'welcome.share': 'Link delen',
    'welcome.viewAccommodation': 'Accommodatie bekijken',
    'welcome.dataProtected': 'ğŸ”’ Uw gegevens zijn beschermd en versleuteld',
    'welcome.compliance': 'We voldoen aan de AVG en Spaanse regelgeving',
    'welcome.timeEstimate': 'ğŸ“‹ Voltooi uw registratie in slechts 3 minuten',
    'welcome.contact': 'Contact',
    'dashboard.myStay': 'Mijn Verblijf',
    'dashboard.myReservation': 'Mijn Reservering',
    'dashboard.openAccommodation': 'ğŸ”“ Accommodatie openen',
    'dashboard.preferences': 'Verblijfsvoorkeuren',
    'dashboard.yourHost': 'Uw Gastheer',
    'dashboard.accommodationInfo': 'Accommodatie Informatie',
    'dashboard.welcomeVideo': 'Welkomstvideo',
    'dashboard.localGuide': 'Lokale Gids',
    'dashboard.customerSupport': 'Klantenservice',
    'dashboard.completeToUnlock': 'Voltooi uw registratie om te ontgrendelen',
    'dashboard.sendMessage': 'ğŸ’¬ Bericht versturen',
    'dashboard.callNow': 'ğŸ“ Nu bellen',
    'dashboard.sendEmail': 'ğŸ“§ E-mail versturen',
    'localGuide.restaurants': 'ğŸ½ï¸ Restaurants',
    'localGuide.cafes': 'â˜• CafÃ©s',
    'localGuide.supermarkets': 'ğŸ›’ Supermarkten',
    'localGuide.transport': 'ğŸš‡ Openbaar vervoer',
    'localGuide.tourist': 'ğŸ›ï¸ Toeristische attracties',
    'localGuide.emergency': 'ğŸ¥ Nooddiensten',
    'localGuide.entertainment': 'ğŸ­ Entertainment',
    'contact.title': 'Gastheer contacteren',
    'contact.name': 'MarÃ­a GarcÃ­a',
    'contact.phone': '+34 612 345 678',
    'contact.email': 'maria@casavistahermosa.com',
    'contact.available': 'Beschikbaar 24/7 voor noodgevallen',
    'share.title': 'Registratielink delen',
    'share.message': 'Voltooi uw registratie voor Casa Vista Hermosa',
    'share.copy': 'Link kopiÃ«ren',
    'share.whatsapp': 'Delen via WhatsApp',
    'share.email': 'Delen via e-mail',
    'share.copied': 'Link gekopieerd!',
  },
};

const languageNames: Record<Language, string> = {
  es: 'EspaÃ±ol',
  en: 'English',
  ca: 'CatalÃ ',
  fr: 'FranÃ§ais',
  de: 'Deutsch',
  nl: 'Nederlands',
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguageState] = useState<Language>(() => {
    const stored = localStorage.getItem('language');
    return (stored as Language) || 'es';
  });

  useEffect(() => {
    localStorage.setItem('language', language);
  }, [language]);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
  };

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  const getLanguageName = (lang: Language): string => {
    return languageNames[lang];
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, getLanguageName }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};
